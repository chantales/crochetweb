<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>order-page</title>
<style>
      body {
  margin: 0;
  padding: 0;
  }

.topnav {
  background-color: #f3d3db;
  overflow: hidden;
  font-family:'monospace';
}

.topnav a {
  float: left;
  color: white;
  text-align: center;
  padding: 20px 20px;
  text-decoration: none;
  font-size: 20px;
}

.topnav a:hover {
  background-color: #e6b2be;
  color: #ffffff;
}


.dropdownButton {
  background-color: #f3d3db;
  overflow: hidden;
  font-family:'monospace';
  padding: 20px;
  border: none;
  font-size: 20px;
  color: #FFFFFF;
}

#logoNav  {
 height: 60px;
 width: auto;
 float: right;
}

#dropdown {
  float: left;
  overflow: hidden;
}

#dropdownContent {
  display: none;
  position:absolute;
  z-index:999;
}

#dropdownContent a {
  color: #FFFFFF;
  background-color: #d4ccdc;
  padding: 20px;
  display: block;
  font-size: 16px;
}

#dropdownContent a:hover 
{background-color: #bab0c4
      ;}


#dropdown:hover #dropdownContent {
      display: flex;
      flex-direction: column;
}

#dropdown:hover .dropdownButton 
{background-color: #e6b2be;}

</style>
</head>
<body>
  <div class="topnav">
    <img src="SC-removebg-preview.png" id="logoNav">
    <a href="index.html">home</a>
    <div id="dropdown">
        <button class="dropdownButton">products</button>
          <div id="dropdownContent">
    <a href="products.html">products</a>
    <a href="order.html">order here</a>
            </div>
            </div>
    <a href="about us.html">about us</a>
     <a href="contact.html">contact us</a>
   </div>
  

<div id="iNeedPadding">

  <div id="enterDetails">
    <h1>Enter details</h1>

    <h4>ID</h4> 
    <input id="enterID" type="text"> 

    <h4>Name</h4> 
    <input id="enterName" type="text"> 

    <h4>Age</h4> 
    <input id="enterAge" type="number"> <br><br>

    <button id="insert">INSERT</button>
    <button id="update">UPDATE</button>
    <button id="remove">REMOVE</button> <br><br>
</div>

<div id="findDetails">
    <h1>Find by ID</h1>
    <h4>ID</h4>
    <input id="findID" type="text"> <br><br>
    <button id="find">FIND</button>
    <h3 id="findName" type="text"></h3>
    <h3 id="findAge" type="number"></h3> <br><br>
</div>

</div>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
   // TODO: Add SDKs for Firebase products that you want to use
   // https://firebase.google.com/docs/web/setup#available-libraries
 
   // Your web app's Firebase configuration
   const firebaseConfig = {
     apiKey: "AIzaSyAI2ataYlzvmEfuQry6XLqz0qN7QhfvbIs",
     authDomain: "peopleorder-3f1f4.firebaseapp.com",
     databaseURL: "https://peopleorder-3f1f4-default-rtdb.asia-southeast1.firebasedatabase.app",
     projectId: "peopleorder-3f1f4",
     storageBucket: "peopleorder-3f1f4.appspot.com",
     messagingSenderId: "96953007204",
     appId: "1:96953007204:web:558aae69099be63528b371"
   };
 
   // Initialize Firebase
   const app = initializeApp(firebaseConfig);
   
   import {getDatabase, set, ref, child}
   from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js"
 
   document.addEventListener('DOMContentLoaded', function() {
   const db = getDatabase();
         var enterName = document.querySelector("#enterName");
         var enterEmail = document.querySelector("#enterEmail");
         var enterDeliver = document.querySelector("#enterDeliver");
         var enterAmount = document.querySelector("#enterAmount");
         var productDropdown = document.getElementById('productDropD');
         var colourDropD = document.getElementById('colourDropD');
         var priceTotal = document.getElementById('priceTotal');
 
    document.getElementById('productDropD').addEventListener('change', function() {
     console.log("Product dropdown selection changed");
     var selectedProduct = productDropdown.value;
     console.log("Selected Product:", selectedProduct);
 });
 
 document.getElementById('colourDropD').addEventListener('change', function() {
     var selectedColour = colourDropD.value;
 });
   
     var insertBtn = document.querySelector("#insert");
     insertBtn.addEventListener('click', InsertData);
 
     function InsertData() {
     var selectedProduct = productDropdown.value;
     var selectedColour = colourDropD.value;
     var priceTotal = document.getElementById('priceTotal')
     var totalCost = parseInt(enterAmount.value) * parseFloat(priceTotal.textContent) || 0
     console.log("Selected Product:", selectedProduct);
     console.log("Selected Colour:", selectedColour);
 
         set(ref(db, "Details/"+ enterName.value), {
                 Name:enterName.value,
                 Email: enterEmail.value,
                 Deliver: enterDeliver.value,
                 Amount: enterAmount.value,
                 Product: selectedProduct,
                 Colour: selectedColour,
                 TotalCost: totalCost.toFixed(2),
             })
 
             .then(()=>{
                  alert("Data added successfully");
             })
             .catch((error)=>{
                 alert(error);
             });
           }
 
     const productColourMap = {
         'photoHolderSimple': ['green', 'pink', 'blue'],
         'photoHolderDeco': ['bear', 'bunny'],
         'crochetBow': ['red', 'pink']
     };
 
     function handleProductDropdownChange() {
       console.log("Product dropdown selection changed");
         var productDropdown = document.getElementById('productDropD');
         var selectedProduct = productDropdown.value;
         var colourDropD = document.getElementById('colourDropD');
         var priceTotal = document.getElementById('priceTotal');
 
     console.log("Selected Product:", selectedProduct);
 
         if (selectedProduct === 'photoHolderSimple') {
             priceTotal.textContent = "$7";
         } else if (selectedProduct === 'photoHolderDeco') {
             priceTotal.textContent = "$8";
         } else if (selectedProduct === 'crochetBow') {
             priceTotal.textContent = "$100";
         } else {
             priceTotal.textContent = "$0";
         }
 
         updateTotalPrice();
         populateColourDropdown(selectedProduct);
       }
 
         function populateColourDropdown(selectedProduct) {
           console.log("Populating colour dropdown for product:", selectedProduct);
           var colourDropD = document.getElementById("colourDropD")
           colourDropD.innerHTML = '';
 
           if (selectedProduct && productColourMap[selectedProduct]) {
         productColourMap[selectedProduct].forEach(colour => {
             let option = document.createElement('option');
             option.value = colour;
             option.textContent = colour;
             colourDropD.appendChild(option);
         });
     }
 }
 
     function handleColourDropdownChange() {
       console.log("Colour dropdown selection changed");
         var selectedColour = colourDropD.value;
         console.log("Selected colour:", selectedColour);
     }
 
     function updateTotalPrice() {
        console.log("Updating total price...");
     var priceTotal = document.getElementById('priceTotal');
     var enterAmount = document.querySelector("#enterAmount");
     var totalAmount = parseInt(enterAmount.value) || 0;
     var basePrice = parseFloat(priceTotal.textContent) || 0;
         console.log("Total Amount:", totalAmount);
         console.log("Base Price:", basePrice);
     var totalPrice = totalAmount * basePrice;
     priceTotal.textContent = "$" + totalPrice.toFixed(2);
     }
 
     handleProductDropdownChange(); 
     document.getElementById('productDropD').addEventListener('change', handleProductDropdownChange);
     document.getElementById('colourDropD').addEventListener('change', handleColourDropdownChange);
     document.getElementById('enterAmount').addEventListener('input', updateTotalPrice);
   });
 
 </script>
</body>
</html>